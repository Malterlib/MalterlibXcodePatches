//
//   Generated by https://github.com/blacktop/ipsw (Version: 3.1.442, BuildTime: 2023-12-27T19:00:48Z)
//
//    - LC_BUILD_VERSION:  Platform: macOS, MinOS: 13.0, SDK: 14.0, Tool: ld (1022.1)
//    - LC_SOURCE_VERSION: 22540.0.0.0.0
//
#ifndef DVTTextStorage_h
#define DVTTextStorage_h
#import <Foundation/Foundation.h>

#include "DVTDiffSessionTextEditBuffer-Protocol.h"
#include "DVTLineRangeCharacterRangeConverter-Protocol.h"
#include "DVTSourceBufferProvider-Protocol.h"
#include "DVTSourceLandmarkItem.h"
#include "DVTSourceLanguageServiceDelegate-Protocol.h"
#include "DVTSourceLanguageService.h"
#include "DVTTextDocumentLocationEncodingConverter-Protocol.h"
#include "DVTSourceLanguageSyntaxTypeService-Protocol.h"
#include "DVTSourceLanguageSourceModelService-Protocol.h"
#include "NSConcreteTextStorage.h"

#include "_LazyInvalidationHelper.h"

@class DVTFontAndColorTheme, DVTObservingToken, DVTSourceCodeLanguage, DVTSourceModel, NSDictionary, NSString, NSTimer;
@protocol DVTSourceLanguageSourceModelService, DVTSourceLanguageSyntaxTypeService, DVTTextStorageDelegate;

@interface DVTTextStorage : NSConcreteTextStorage<DVTDiffSessionTextEditBuffer, DVTSourceBufferProvider, DVTSourceLanguageServiceDelegate, DVTTextDocumentLocationEncodingConverter, DVTLineRangeCharacterRangeConverter> {
  /* instance variables */
  struct _DVTTextLineOffsetTable { unsigned long long capacity; unsigned long long count; unsigned long long *offsets; unsigned long long deferredAdjustmentIndex; long long deferredAdjustment; } _lineOffsets;
  unsigned long long _changeCapacity;
  unsigned long long _numChanges;
  struct _DVTTextChangeEntry { struct _NSRange x0; long long x1; struct _NSRange x2; long long x3; double x4; } * _changes;
  NSTimer *_sourceModelUpdater;
  DVTSourceLandmarkItem *_rootImportLandmark;
  NSTimer *_landmarksCacheTimer;
  DVTObservingToken *_wrappedLinesIndentObserver;
  struct _NSRange _rangeNeedingInvalidation;
  struct { unsigned int lineEndings :2 ; unsigned int usesTabs :1 ; unsigned int syntaxColoringEnabled :1 ; unsigned int processingLazyInvalidation :1 ; unsigned int breakChangeCoalescing :1 ; unsigned int doingBatchEdit :1 ; unsigned int doingSubwordMovement :1 ; unsigned int doingExpressionMovement :1 ; unsigned int delegateRespondsToShouldAllowEditing :1 ; unsigned int delegateRespondsToDidUpdateSourceLandmarks :1 ; unsigned int delegateRespondsToNodeTypeForItem :1 ; unsigned int delegateRespondsToSourceLanguageServiceContext :1 ; unsigned int languageServiceSupportsSourceModel :1 ; unsigned int disabled :16 ; } _tsflags;
  _LazyInvalidationHelper *_lazyInvalidationHelper;
  DVTSourceLanguageService<DVTSourceLanguageSyntaxTypeService> *_sourceLanguageService;
  DVTObservingToken *_sourceLanguageServiceContextObservingToken;
}

@property (readonly) BOOL indentable;
@property (readonly, copy) NSString *string;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;
@property double lastEditTimestamp;
@property BOOL processingLazyInvalidation;
@property NSObject<DVTTextStorageDelegate> *delegate;
@property unsigned long long lineEndings;
@property (readonly) BOOL isEditable;
@property (nonatomic) unsigned long long tabWidth;
@property unsigned long long indentWidth;
@property (nonatomic) unsigned long long wrappedLineIndentWidth;
@property BOOL usesTabs;
@property (readonly) double advancementForSpace;
@property (readonly) double advancementForTab;
@property (readonly) unsigned long long numberOfLines;
@property (readonly) unsigned long long currentChangeIndex;
@property (copy) DVTSourceCodeLanguage *language;
@property (readonly) DVTSourceLanguageService<DVTSourceLanguageSyntaxTypeService> *languageService;
@property (readonly) DVTSourceLanguageService<DVTSourceLanguageSourceModelService> *sourceModelService;
@property (readonly) DVTSourceModel *sourceModel;
@property (readonly) DVTSourceModel *sourceModelWithoutParsing;
@property (readonly) DVTSourceLandmarkItem *topSourceLandmark;
@property (readonly) BOOL hasPendingSourceLandmarkInvalidation;
@property BOOL subwordMovement;
@property BOOL expressionMovement;
@property BOOL syntaxColoringEnabled;
@property (retain) DVTFontAndColorTheme *fontAndColorTheme;
@property (readonly, nonatomic) NSDictionary *sourceLanguageServiceContext;

/* class methods */
+ (id)_sourceLandmarksLogAspect;
+ (id)_changeTrackingLogAspect;
+ (void)initialize;
+ (id)keyPathsForValuesAffectingSourceLanguageServiceContext;

/* instance methods */
- (long long)columnForPositionConvertingTabs:(unsigned long long)tabs;
- (unsigned long long)firstColonAfterItem:(id)item inRange:(struct _NSRange)range;
- (BOOL)_isInvalidObjectLiteralItem:(id)item;
- (long long)_getIndentForObjectLiteral:(id)literal atLocation:(unsigned long long)location;
- (long long)getIndentForLine:(long long)line;
- (BOOL)isIndentable;
- (id)getTextForLineSansBlanks:(long long)blanks;
- (long long)firstNonblankForLine:(long long)line convertTabs:(BOOL)tabs;
- (BOOL)indentLine:(long long)line options:(unsigned long long)options undoManager:(id)manager;
- (void)indentLineRange:(struct _NSRange)range undoManager:(id)manager;
- (void)indentCharacterRange:(struct _NSRange)range undoManager:(id)manager;
- (BOOL)isAtBOL:(struct _NSRange)bol;
- (BOOL)indentAtBeginningOfLineForCharacterRange:(struct _NSRange)range undoManager:(id)manager;
- (BOOL)_isItemBracketExpression:(id)expression;
- (BOOL)_isItemBracketLikeExpression:(id)expression;
- (BOOL)_isItemBlockExpression:(id)expression;
- (BOOL)_isItemParenExpression:(id)expression;
- (id)_parenLikeItemAtLocation:(unsigned long long)location;
- (id)_textInBetweenItem:(id)item prevItem:(id)item;
- (BOOL)_isTextEmptyInBetweenItem:(id)item prevItem:(id)item;
- (BOOL)isAtFirstArgumentInMethodCallAtLocation:(unsigned long long)location inCall:(BOOL *)call;
- (unsigned long long)locationForOpeningBracketForClosingBracket:(unsigned long long)bracket withArgs:(BOOL *)args;
- (unsigned long long)_startLocationForObjCMethodCallAtLocation:(unsigned long long)location withArgs:(BOOL *)args;
- (unsigned long long)_reverseParseExpressionFromIndex:(unsigned long long)index ofParent:(id)parent;
- (BOOL)_isItemExpression:(id)expression;
- (BOOL)_isExpressionItemLikelyTarget:(id)target;
- (BOOL)_isExpressionItemLikeFunction:(id)function;
- (void)_dvtTextStorageCommonInit;
- (id)initWithAttributedString:(id)string;
- (id)initWithString:(id)string attributes:(id)attributes;
- (id)initWithString:(id)string;
- (id)init;
- (void)dealloc;
- (void)resetAdvancementForSpace;
- (void)doingBatchEdit:(BOOL)edit notifyModel:(BOOL)model;
- (void)doingBatchEdit:(BOOL)edit;
- (BOOL)isDoingBatchEdit;
- (void)replaceCharactersInRange:(struct _NSRange)range withString:(id)string evenIfNotEditable:(BOOL)editable;
- (void)replaceCharactersInRange:(struct _NSRange)range withString:(id)string;
- (void)replaceCharactersInRange:(struct _NSRange)range withAttributedString:(id)string;
- (void)beginEditing;
- (void)endEditing;
- (void)processEditing;
- (BOOL)fixesAttributesLazily;
- (void)invalidateAttributesInRange:(struct _NSRange)range;
- (void)addLayoutManager:(id)manager;
- (void)replaceCharactersInRange:(struct _NSRange)range withString:(id)string withUndoManager:(id)manager;
- (void)replaceCharactersInRange:(struct _NSRange)range withAttributedString:(id)string withUndoManager:(id)manager;
- (id)_associatedTextViews;
- (void)fixSyntaxColoringInRange:(struct _NSRange)range;
- (void)fixAttributesInRange:(struct _NSRange)range;
- (void)updateAttributesInRange:(struct _NSRange)range;
- (void)invalidateDisplayForRange:(struct _NSRange)range;
- (void)invalidateDisplayForLineRange:(struct _NSRange)range;
- (void)_invalidateCallback:(id)callback;
- (void)_processLazyInvalidation;
- (void)_updateLazyInvalidationForEditedRange:(struct _NSRange)range changeInLength:(long long)length;
- (void)scheduleLazyInvalidationForRange:(struct _NSRange)range;
- (void)scheduleLazyInvalidationForLineRange:(struct _NSRange)range;
- (id)_debugStringFromUnsignedIntegers:(const unsigned long long *)integers count:(unsigned long long)count;
- (void)_dumpLineOffsetsTable;
- (struct _NSRange)characterRangeFromDocumentLocation:(id)location;
- (struct _NSRange)characterRangeForLineRange:(struct _NSRange)range;
- (struct _NSRange)lineRangeForCharacterRange:(struct _NSRange)range;
- (struct _NSRange)currentWordAtIndex:(unsigned long long)index;
- (id)_debugInfoString;
- (void)clearChangeHistory;
- (void)breakChangeTrackingCoalescing;
- (struct _NSRange)characterRangeForCharacterRange:(struct _NSRange)range fromChangeIndex:(unsigned long long)index toChangeIndex:(unsigned long long)index;
- (struct _NSRange)lineRangeForLineRange:(struct _NSRange)range fromChangeIndex:(unsigned long long)index toChangeIndex:(unsigned long long)index;
- (unsigned long long)changeIndexForTimestamp:(double)timestamp;
- (id)_debugInfoForChangeIndex:(unsigned long long)index toChangeIndex:(unsigned long long)index;
- (struct _NSRange)characterRangeForCharacterRange:(struct _NSRange)range fromTimestamp:(double)timestamp toTimestamp:(double)timestamp;
- (struct _NSRange)lineRangeForLineRange:(struct _NSRange)range fromTimestamp:(double)timestamp toTimestamp:(double)timestamp;
- (void)_dumpChangeHistory;
- (void)willReplaceCharactersInRange:(struct _NSRange)range withString:(id)string changeInLength:(long long)length;
- (void)didReplaceCharactersInRange:(struct _NSRange)range withString:(id)string changeInLength:(long long)length replacedString:(id)string;
- (id)stringForItem:(id)item;
- (void)invalidateAllLandmarks;
- (void)_invalidateSourceLandmarks:(id)landmarks;
- (id)importLandmarkItems;
- (id)_sourceLandmarkAtCharacterIndex:(unsigned long long)index inLandmarkItems:(id)items;
- (id)sourceLandmarkAtCharacterIndex:(unsigned long long)index;
- (struct _NSRange)rangeOfWordAtIndex:(unsigned long long)index allowNonWords:(BOOL)words;
- (struct _NSRange)rangeOfWordAtIndex:(unsigned long long)index;
- (struct _NSRange)doubleClickAtIndex:(unsigned long long)index inRange:(struct _NSRange)range;
- (BOOL)isSubwordMovement;
- (unsigned long long)nextWordFromIndex:(unsigned long long)index forward:(BOOL)forward;
- (unsigned long long)dvt_nextWordFromIndex:(unsigned long long)index forward:(BOOL)forward;
- (BOOL)isExpressionMovement;
- (unsigned long long)nextExpressionFromIndex:(unsigned long long)index forward:(BOOL)forward;
- (id)symbolNameAtCharacterIndex:(unsigned long long)index nameRanges:(id *)ranges;
- (id)importStatementStringAtCharacterIndex:(unsigned long long)index effectiveRange:(struct _NSRange *)range isModule:(BOOL *)module;
- (id)importStatementStringAtCharacterIndex:(unsigned long long)index;
- (struct _NSRange)methodCallRangeAtIndex:(unsigned long long)index;
- (struct _NSRange)methodDefinitionRangeAtIndex:(unsigned long long)index;
- (struct _NSRange)functionRangeAtIndex:(unsigned long long)index isDefinitionOrCall:(BOOL *)call;
- (struct _NSRange)functionOrMethodBodyRangeAtIndex:(unsigned long long)index;
- (id)stringBySwappingRange:(struct _NSRange)range withAdjacentRange:(struct _NSRange)range;
- (BOOL)isSyntaxColoringEnabled;
- (void)_themeColorsChanged:(id)changed;
- (long long)nodeTypeAtCharacterIndex:(unsigned long long)index effectiveRange:(struct _NSRange *)range context:(id)context;
- (id)colorAtCharacterIndex:(unsigned long long)index effectiveRange:(struct _NSRange *)range context:(id)context;
- (long long)syntaxTypeForItem:(id)item context:(id)context;
- (unsigned long long)leadingWhitespacePositionsForLine:(unsigned long long)line;
- (double)indentationForWrappedLineAtIndex:(unsigned long long)index;
- (long long)nodeTypeForTokenizableItem:(id)item;
- (id)_ancestorItemForTokenizableItem:(id)item;
- (unsigned long long)lineBreakBeforeIndex:(unsigned long long)index withinRange:(struct _NSRange)range;
- (void)_dropRecomputableState;
- (void)_restoreRecomputableState;
- (id)convertLocationToUTF8EncodedLocation:(id)location;
- (id)convertLocationToNativeNSStringEncodedLocation:(id)location;
- (id)compatibleLocationFromLocation:(id)location;
- (id)updatedLocationFromLocation:(id)location toTimestamp:(double)timestamp;
@end

#endif /* DVTTextStorage_h */
