//
//   Generated by https://github.com/blacktop/ipsw (Version: 3.1.442, BuildTime: 2023-12-27T19:00:48Z)
//
//    - LC_BUILD_VERSION:  Platform: macOS, MinOS: 13.0, SDK: 14.0, Tool: ld (1022.1)
//    - LC_SOURCE_VERSION: 22551.0.0.0.0
//
#ifndef IDETestManager_h
#define IDETestManager_h
#import <Foundation/Foundation.h>

#include "DVTCancellable-Protocol.h"
#include "DVTInvalidation-Protocol.h"
#include "IDELogStore.h"
#include "IDETestRunSession.h"
#include "IDETestStateChangeEmitter-Protocol.h"
#include "IDETestStateChangeRegistry.h"
#include "IDEWorkspace.h"
#include "_TtC13IDEFoundation21IDEAdHocTestSelection.h"
#include "_TtC13IDEFoundation24IDETestPlanChangeHandler.h"

@class DVTDelayedInvocation, DVTNotificationToken, DVTObservingToken, DVTStackBacktrace, DVTTimeSlicedMainThreadWorkQueue, NSArray, NSDictionary, NSHashTable, NSMutableArray, NSMutableDictionary, NSMutableSet, NSSet, NSString;
@protocol XCTHTestMetadataDatabase;

@interface IDETestManager : NSObject<IDETestStateChangeEmitter, DVTInvalidation> {
  /* instance variables */
  NSMutableDictionary *_testablesByFileURL;
  NSHashTable *_searchedTestables;
  NSObject<DVTInvalidation> *_blueprintsChangedObserver;
  DVTNotificationToken *_buildOperationObserver;
  DVTObservingToken *_activeSchemeObserver;
  NSObject<DVTCancellable> *_delayedNotifyObserversOfChangedTestablesToken;
  DVTTimeSlicedMainThreadWorkQueue *_testsAddedOrRemovedToTestableNotificationQueue;
  BOOL _forcingReloadAll;
  NSMutableDictionary *_dataSources;
  NSMutableDictionary *_testRunGenerationCountsByTestID;
  NSDictionary *_testableNameToIdentifiersForLatestGeneration;
  NSMutableDictionary *_testRunGenerationCountsByTestableID;
  DVTDelayedInvocation *_forceReloadAllTestablesInvocation;
  DVTDelayedInvocation *_subtestsChangedInvocation;
  NSMutableArray *_testableDifferencesToSend;
  NSMutableSet *_updatedTestablesToSend;
  IDETestStateChangeRegistry *_stateChangeRegistry;
  NSArray *_alphabetizedTestables;
}

@property (retain) IDELogStore *logStore;
@property (copy) NSSet *generateCoverageReportSessions;
@property (readonly) NSMutableDictionary *testableStateByTestableName;
@property (readonly) NSMutableDictionary *fileChangeBrokersByFileURL;
@property BOOL loadingComplete;
@property unsigned long long testSessionGenerationCounter;
@property (retain) NSMutableArray *concurrentTestRunSessions;
@property (retain, nonatomic) IDEFoundation_IDETestPlanChangeHandler *testPlanDeletionHandler;
@property (retain, nonatomic) IDEFoundation_IDETestPlanChangeHandler *testPlanTargetDeletionHandler;
@property (retain, nonatomic) IDEFoundation_IDETestPlanChangeHandler *testPlanTargetNameChangeHandler;
@property (readonly) NSMutableArray *mutableTestPreparationActivities;
@property (retain) IDEFoundation_IDEAdHocTestSelection *testsLastRun;
@property (retain) IDEFoundation_IDEAdHocTestSelection *testsLastProfiled;
@property (copy) NSArray *testConfigurationsLastRun;
@property (copy) NSArray *testConfigurationsLastProfiled;
@property (readonly) IDEWorkspace *workspace;
@property (readonly) NSSet *testableProviders;
@property (readonly) NSSet *testables;
@property (retain) IDETestRunSession *testRunSession;
@property BOOL didRunTests;
@property (readonly) NSArray *testPreparationActivities;
@property (readonly) NSObject<XCTHTestMetadataDatabase> *testDatabase;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;
@property (readonly, nonatomic) BOOL valid;
@property (readonly) DVTStackBacktrace *invalidationBacktrace;
@property (retain) DVTStackBacktrace *creationBacktrace;

/* class methods */
+ (id)testingTypeIdentifier;
+ (void)initialize;
+ (id)testsForFileURL:(id)url fromTestablesByFileURL:(id)url;
+ (id)testLocationsForFileURL:(id)url fromTestablesByFileURL:(id)url testablesInScheme:(id)scheme compositeStateBlock:(id /* block */)block;
+ (id)staticLibraryDependenciesForBlueprint:(id)blueprint inWorkspace:(id)workspace;

/* instance methods */
- (id)initWithWorkspace:(id)workspace;
- (id)forceReloadAllTestablesInvocation;
- (id)subtestsChangedInvocation;
- (void)primitiveInvalidate;
- (void)_removeInvalidTestableStateForInvalidTestables:(id)testables;
- (void)_updateWithTestablesToRemove:(id)remove toAdd:(id)add;
- (void)_updateWithTestableProvidersToRemove:(id)remove toAdd:(id)add;
- (void)_updateForCurrentTestableProviders:(id)providers;
- (void)addRunningTest:(id)test;
- (void)removeRunningTest:(id)test;
- (void)setLastRunSessionGenerationCount:(unsigned long long)count forTest:(id)test;
- (void)processNewTestResult:(id)result forTest:(id)test repetitionPolicy:(id)policy configurationName:(id)name;
- (unsigned long long)_lastRunSessionGenerationCountForTest:(id)test;
- (unsigned long long)_lastRunSessionGenerationCountForTestable:(id)testable;
- (void)_removeCoverageReportOperation:(id)operation;
- (void)addCoverageReportOperation:(id)operation;
- (void)_updateAllFileChangeBrokerObservers;
- (void)_blueprintsDidChange:(id)change;
- (void)_buildOperationDidStop:(id)stop;
- (void)_notifyAllTestablesObservers;
- (id)_stateForTestable:(id)testable;
- (void)setTestablesObserved:(id)observed byObserver:(id)observer;
- (BOOL)anyTestableStateHasObservers;
- (void)addObserver:(id)observer ofFile:(id)file;
- (void)removeObserver:(id)observer ofFile:(id)file;
- (void)_notifyUpdatedTestFilesForTestable:(id)testable addedFiles:(id)files removedFiles:(id)files;
- (void)_notifyObserversOfChangedTestable:(id)testable;
- (void)_notifyObserversOfChangedTestableWithDifference:(id)difference;
- (void)_delayedForceReloadAllTestables;
- (void)_forceReloadAllTestables;
- (void)diffPrevious:(id)previous current:(id)current onlyNew:(id *)new onlyOld:(id *)old;
- (void)_updateTestsLastRunOrProfiledForRemovedTests:(id)tests;
- (void)_checkLoadingComplete;
- (void)_loadTestsForTestable:(id)testable;
- (void)notifyObserversOfTestableChangeThenCheckIfLoadingCompleted:(id)completed;
- (BOOL)_anyTestSessionContainsRunningTest:(id)test;
- (BOOL)isTestPendingRun:(id)run;
- (BOOL)isTestablePendingRun:(id)run;
- (id)performanceMetricsForTest:(id)test;
- (id)noticesForTest:(id)test;
- (unsigned long long)stateOfTest:(id)test;
- (unsigned long long)stateOfTestable:(id)testable;
- (unsigned long long)stateOfTestPlan:(id)plan;
- (unsigned long long)compositeStateOfTestables:(id)testables;
- (unsigned long long)compositeStateOfTests:(id)tests;
- (void)resetTestsLastRun;
- (void)cleanTestResults;
- (void)invalidateAllCachedTestStateSnapshots;
- (void)startTestingFor:(id)forNot;
- (unsigned long long)_latestGenerationForAncestorsOfTest:(id)test;
- (BOOL)_shouldPurgeRuntimeDiscoveredTestTestResultForTest:(id)test;
- (void)_purgeInvalidRuntimeDiscoveredTestsForTest:(id)test withSkippedTests:(id)tests;
- (void)finishTestingForTestingSpecifier:(id)specifier;
- (id)testOperationForTestRunSpecificationGroups:(id)groups executionEnvironment:(id)environment runDestinationPool:(id)pool actionRecord:(id)record schemeIdentifier:(id)identifier outSchemeActionResultOperation:(id *)operation launchParametersBlock:(id /* block */)block actionCallbackBlock:(id /* block */)block error:(id *)error;
- (id)remoteDeviceProvisioningOperationForTestRunRequirements:(id)requirements testRunSpecificationGroups:(id)groups testingCommandLineOverrides:(id)overrides logSectionRecorder:(id)recorder;
- (id)startTestPreparationActivityWithTitle:(id)title;
- (void)endTestPreparationActivity:(id)activity;
- (void)_requestingStartTestOperationForSpecifications:(id)specifications;
- (void)didCompleteFor:(id)forNot;
- (void)_notifyFileChangeBrokersAfterCompletionOfTest:(id)test;
- (void)_notifyFileChangeBrokersAfterCompletionOfTests:(id)tests inTestables:(id)testables forFileURL:(id)url;
- (id)alphabetizedTestables;
- (void)setTestableDataSource:(id)source forTestingSystemWithIdentifier:(id)identifier;
- (id)testableDataSourceForTestingSystemWithIdentifier:(id)identifier;
- (id)_bestTestableForFileURL:(id)url;
- (id)testsForFileURL:(id)url;
- (id)testLocationsForFileURL:(id)url;
- (id)fileURLForTest:(id)test;
- (id)fileURLForTestIdentifier:(id)identifier;
- (id)testForIdentifier:(id)identifier;
- (id)testablesForFileURL:(id)url;
- (void)asyncApplyBaselineRecord:(id)record forBlueprintProviderRelativePath:(id)path blueprintName:(id)name testBundleRunDestinationRecord:(id)record behavior:(unsigned long long)behavior completionBlock:(id /* block */)block;
- (void)registerObserver:(id)observer forStateChange:(id)change invokeImmediately:(BOOL)immediately withHandler:(id /* block */)handler;
- (void)unregisterObserver:(id)observer forStateChange:(id)change;
- (void)notifyObserversOfStateChange:(id)change withPreviousValue:(id)value;
@end

#endif /* IDETestManager_h */
